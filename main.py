from controllers.account_controller import AccountController
from controllers.transaction_controller import TransactionController
from controllers.category_controller import CategoryController
from controllers.financial_goal_controller import FinancialGoalController

def print_menu():
    print("\n=== Personal Finance Menu ===")
    print("1. –°–æ–∑–¥–∞—Ç—å —Å—á—ë—Ç")
    print("2. –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é")
    print("3. –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é")
    print("4. –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é —Ü–µ–ª—å")
    print("5. –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å—á–µ—Ç–∞")
    print("6. –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏")
    print("7. –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏")
    print("8. –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ü–µ–ª–∏")
    print("0. –í—ã–π—Ç–∏")

def main():
    account_ctrl = AccountController()
    transaction_ctrl = TransactionController()
    category_ctrl = CategoryController()
    goal_ctrl = FinancialGoalController()

    while True:
        print_menu()
        choice = input("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: ")

        if choice == "1":
            id = int(input("ID —Å—á—ë—Ç–∞: "))
            uid = int(input("ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "))
            name = input("–ù–∞–∑–≤–∞–Ω–∏–µ —Å—á—ë—Ç–∞: ")
            bal = float(input("–ë–∞–ª–∞–Ω—Å: "))
            cur = input("–í–∞–ª—é—Ç–∞: ")
            account_ctrl.create_account(id, uid, name, bal, cur)

        elif choice == "2":
            id = int(input("ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: "))
            uid = int(input("ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "))
            acc_id = int(input("ID —Å—á—ë—Ç–∞: "))
            cat_id = int(input("ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: "))
            amt = float(input("–°—É–º–º–∞: "))
            typ = input("–¢–∏–ø (income/expense): ")
            cur = input("–í–∞–ª—é—Ç–∞: ")
            desc = input("–û–ø–∏—Å–∞–Ω–∏–µ: ")
            transaction_ctrl.add_transaction(id, uid, acc_id, cat_id, amt, typ, cur, desc)

        elif choice == "3":
            id = int(input("ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: "))
            uid = int(input("ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "))
            name = input("–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ")
            typ = input("–¢–∏–ø (income/expense): ")
            category_ctrl.create_category(id, uid, name, typ)

        elif choice == "4":
            id = int(input("ID —Ü–µ–ª–∏: "))
            uid = int(input("ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "))
            name = input("–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏: ")
            target = float(input("–¶–µ–ª–µ–≤–∞—è —Å—É–º–º–∞: "))
            current = float(input("–ù–∞—á–∞–ª—å–Ω–∞—è —Å—É–º–º–∞: "))
            deadline = input("–î–µ–¥–ª–∞–π–Ω (YYYY-MM-DD): ")
            goal_ctrl.create_goal(id, uid, name, target, current, deadline)

        elif choice == "5":
            account_ctrl.list_accounts()

        elif choice == "6":
            transaction_ctrl.list_transactions()

        elif choice == "7":
            category_ctrl.list_categories()

        elif choice == "8":
            goal_ctrl.list_goals()

        elif choice == "0":
            print("–î–æ —Å–≤–∏–¥–∞–Ω–∏—è üëã")
            break

        else:
            print("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–ø—ã—Ç–∫—É.")

if __name__ == "__main__":
    main()
